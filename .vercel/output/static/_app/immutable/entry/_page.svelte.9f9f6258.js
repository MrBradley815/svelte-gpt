import{J as B,S as Q,i as W,s as X,k as y,q as A,a as O,l as v,m as k,r as C,h as m,c as P,n as T,b as I,G as b,K as D,L as G,M as Y,g as w,d as U,f as J,N as Z,v as K,O as x,P as M,u as ee,Q as te,R as V}from"../chunks/index.0c3d5467.js";import{w as le}from"../chunks/index.0a121990.js";const N=le([]);function ae(f){const e=f-1;return e*e*e+1}function q(f,{delay:e=0,duration:l=400,easing:n=ae,x:c=0,y:o=0,opacity:t=0}={}){const r=getComputedStyle(f),a=+r.opacity,s=r.transform==="none"?"":r.transform,u=a*(1-t),[i,d]=B(c),[E,S]=B(o);return{delay:e,duration:l,easing:n,css:(g,_)=>`
			transform: ${s} translate(${(1-g)*i}${d}, ${(1-g)*E}${S});
			opacity: ${a-u*_}`}}function F(f,e,l){const n=f.slice();return n[2]=e[l],n}function se(f){let e,l;return{c(){e=y("button"),l=A("Send")},l(n){e=v(n,"BUTTON",{});var c=k(e);l=C(c,"Send"),c.forEach(m)},m(n,c){I(n,e,c),b(e,l)},d(n){n&&m(e)}}}function ne(f){let e;return{c(){e=y("button"),this.h()},l(l){e=v(l,"BUTTON",{"aria-busy":!0}),k(e).forEach(m),this.h()},h(){T(e,"aria-busy","true"),e.disabled=!0},m(l,n){I(l,e,n)},d(l){l&&m(e)}}}function $(f){let e,l,n,c,o=f[0],t=[];for(let s=0;s<o.length;s+=1)t[s]=j(F(f,o,s));const r=s=>U(t[s],1,1,()=>{t[s]=null});let a=f[1]&&H();return{c(){e=y("article"),l=y("ul");for(let s=0;s<t.length;s+=1)t[s].c();n=O(),a&&a.c(),this.h()},l(s){e=v(s,"ARTICLE",{class:!0});var u=k(e);l=v(u,"UL",{});var i=k(l);for(let d=0;d<t.length;d+=1)t[d].l(i);i.forEach(m),n=P(u),a&&a.l(u),u.forEach(m),this.h()},h(){T(e,"class","responses svelte-zylc4a")},m(s,u){I(s,e,u),b(e,l);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(l,null);b(e,n),a&&a.m(e,null),c=!0},p(s,u){if(u&1){o=s[0];let i;for(i=0;i<o.length;i+=1){const d=F(s,o,i);t[i]?(t[i].p(d,u),w(t[i],1)):(t[i]=j(d),t[i].c(),w(t[i],1),t[i].m(l,null))}for(K(),i=o.length;i<t.length;i+=1)r(i);J()}s[1]?a||(a=H(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(s){if(!c){for(let u=0;u<o.length;u+=1)w(t[u]);c=!0}},o(s){t=t.filter(Boolean);for(let u=0;u<t.length;u+=1)U(t[u]);c=!1},d(s){s&&m(e),x(t,s),a&&a.d()}}}function j(f){let e,l=f[2].message+"",n,c,o,t;return{c(){e=y("li"),n=A(l),this.h()},l(r){e=v(r,"LI",{class:!0});var a=k(e);n=C(a,l),a.forEach(m),this.h()},h(){T(e,"class",c=M(f[2].type==="message"?"message":"answer")+" svelte-zylc4a")},m(r,a){I(r,e,a),b(e,n),t=!0},p(r,a){(!t||a&1)&&l!==(l=r[2].message+"")&&ee(n,l),(!t||a&1&&c!==(c=M(r[2].type==="message"?"message":"answer")+" svelte-zylc4a"))&&T(e,"class",c)},i(r){t||(te(()=>{t&&(o||(o=V(e,q,{duration:500,y:70},!0)),o.run(1))}),t=!0)},o(r){o||(o=V(e,q,{duration:500,y:70},!1)),o.run(0),t=!1},d(r){r&&m(e),r&&o&&o.end()}}}function H(f){let e;return{c(){e=y("div"),this.h()},l(l){e=v(l,"DIV",{"aria-busy":!0}),k(e).forEach(m),this.h()},h(){T(e,"aria-busy","true")},m(l,n){I(l,e,n)},d(l){l&&m(e)}}}function re(f){let e,l,n,c,o,t,r,a,s,u,i,d;function E(h,p){return h[1]?ne:se}let S=E(f),g=S(f),_=f[0].length>0&&$(f);return{c(){e=y("main"),l=y("h1"),n=A("SvelteGPT"),c=O(),o=y("article"),t=y("form"),r=y("input"),a=O(),g.c(),s=O(),_&&_.c(),this.h()},l(h){e=v(h,"MAIN",{});var p=k(e);l=v(p,"H1",{});var R=k(l);n=C(R,"SvelteGPT"),R.forEach(m),c=P(p),o=v(p,"ARTICLE",{});var z=k(o);t=v(z,"FORM",{});var L=k(t);r=v(L,"INPUT",{type:!0,name:!0,placeholder:!0}),a=P(L),g.l(L),L.forEach(m),z.forEach(m),s=P(p),_&&_.l(p),p.forEach(m),this.h()},h(){T(r,"type","text"),T(r,"name","message"),T(r,"placeholder","Ask me anything!")},m(h,p){I(h,e,p),b(e,l),b(l,n),b(e,c),b(e,o),b(o,t),b(t,r),D(r,f[2]),b(t,a),g.m(t,null),b(e,s),_&&_.m(e,null),u=!0,i||(d=[G(r,"input",f[4]),G(t,"submit",Y(f[3]))],i=!0)},p(h,[p]){p&4&&r.value!==h[2]&&D(r,h[2]),S!==(S=E(h))&&(g.d(1),g=S(h),g&&(g.c(),g.m(t,null))),h[0].length>0?_?(_.p(h,p),p&1&&w(_,1)):(_=$(h),_.c(),w(_,1),_.m(e,null)):_&&(K(),U(_,1,1,()=>{_=null}),J())},i(h){u||(w(_),u=!0)},o(h){U(_),u=!1},d(h){h&&m(e),g.d(),_&&_.d(),i=!1,Z(d)}}}function ie(f,e,l){let n=[],c,o=!1;N.subscribe(a=>{l(0,n=a)});async function t(a){l(1,o=!0),N.update(E=>[...E,{type:"message",message:c}]),l(2,c="");const s=a.target,u=new FormData(s),d=await(await fetch("/api/chatgpt",{method:"POST",body:u})).json();N.update(E=>[...E,{type:"answer",message:d.content}]),l(1,o=!1)}function r(){c=this.value,l(2,c)}return[n,o,c,t,r]}class ue extends Q{constructor(e){super(),W(this,e,ie,re,X,{})}}export{ue as default};
